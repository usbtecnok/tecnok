<!DOCTYPE html>
<html>
<head>
  <title>USBtecnokCar - Mapa em tempo real</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <style>
    #map {
      height: 100vh;
      width: 100%;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
    // Inicializa o mapa
    var map = L.map('map').setView([-22.51, -43.71], 13);

    // Camada do OpenStreetMap
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    // Marcadores do passageiro
    var passageiro = L.marker([-22.512, -43.715], {
      icon: L.icon({
        iconUrl: 'https://maps.google.com/mapfiles/ms/icons/blue-dot.png',
        iconSize: [32, 32]
      })
    }).addTo(map).bindPopup("Passageiro");

    // Motoristas iniciais
    var motoristasData = [
      {lat: -22.515, lng: -43.713, nome: "Motorista 1"},
      {lat: -22.508, lng: -43.718, nome: "Motorista 2"},
      {lat: -22.513, lng: -43.719, nome: "Motorista 3"}
    ];

    var motoristas = [];

    // Cria marcadores de motoristas
    motoristasData.forEach(function(m) {
      var marker = L.marker([m.lat, m.lng], {
        icon: L.icon({
          iconUrl: 'https://maps.google.com/mapfiles/ms/icons/red-dot.png',
          iconSize: [32, 32]
        })
      }).addTo(map).bindPopup(m.nome);
      motoristas.push(marker);
    });

    // Função para mover motoristas aleatoriamente
    function moverMotoristas() {
      motoristas.forEach(function(marker) {
        var pos = marker.getLatLng();
        var novoLat = pos.lat + (Math.random() - 0.5) * 0.001;
        var novoLng = pos.lng + (Math.random() - 0.5) * 0.001;
        marker.setLatLng([novoLat, novoLng]);
      });
    }

    // Atualiza a posição a cada 2 segundos
    setInterval(moverMotoristas, 2000);

  </script>
</body>
</html>
